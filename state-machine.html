<!DOCTYPE HTML>
<!--
	Telephasic by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>State Machine of PongBot: PongMaster</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="no-sidebar is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper">
					<div id="header" class="container">

						<!-- Logo -->
							<h1 id="logo"><a href="index.html">PongBot</a></h1>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li><a href="navigation.html">Navigation</a></li>
									<li><a href="acoustics.html">Acoustics</a></li>
									<li class="break"><a href="state-machine.html">FSM</a></li>
									<li><a href="obs-avoidance.html">Obstacle Avoidance</a></li>
								</ul>
							</nav>

					</div>
				</div>

			<!-- Main -->
				<div class="wrapper">
					<div class="container" id="main">

						<!-- Content -->
							<article id="content">
								<header>
									<h2>Finite State Machine: PongMaster</h2>
                                    <p>At the core of PongBot's functionality is the PongMaster node, which is a finite state machine that coordinates communication between navigation, acoustics, obstacle, and drive controller nodes. </p>
								</header>
								<a href="#" class="image featured"><img src="images/fsm-hi-res.png" alt="" /></a>
                                <p>Our PongMaster has a number of states described below to coordinate robot functionality. These states transition to others, forming a loop that terminates upon achieving the goal pose.</p>
                                <h3>Both Drive Routines</h3>
                                <p>LISTEN: This is the first state our robot enters. It listens for our acoustics node to publish a target pose after the acoustics simulation has concluded. The LISTEN state transitions directly into our PLAN state. </p>
                                <p>PLAN: This state handles communication between PongMaster and our navigation node. It passes vital data such as our current and target poses to the navigation node, as well as the file path of our current map. If we are operating with our obstacle avoidance routine, we transition to the TURN state. If we are operating on pure PID, we transition to the DRIVE_PID state.</p>
                                <h3>Obstacle Avoidance Routine:</h3>
                                <p>TURN: We only access this state when running our obstacle-avoidance routine. This state handles turning-on-a-dime until our robot is facing the next target pose. TURN exclusively transitions into the DETECT state.</p>
                                <p>DETECT: This state runs our obstacle detection algorithm, searching for obstacles directly in front of the robot. In the event that an obstacle is detected, we enter the UPDATE state.</p>
                                <p>UPDATE: We are in this state if an obstacle was detected in DETECT. This state handles updating our map with the location of the obstacle, as well as making a call to the navigation server to get the shortest possible route across the new map. Given a successful UPDATE, we transition back into the TURN state within the obstacle avoidance routine.</p>
                                <p>DRIVE: This state is entered if NO obstacle is detected in DETECT state, thus, signifying a clear path forward to the target pose. Once the target pose is achieved, we enter the ADVANCE state.</p>
                                <h3>PID Drive Routine</h3>
                                <p>DRIVE_PID: This state handles pure PID drive controls between our current and target locations. Upon achieving the target pose, we enter the ADVANCE state</p>
                                <h3>Both Drive Routines</h3>
                                <p>ADVANCE: This state is achieved whenever DRIVE or DRIVE_PID returns a successful response, signifying that we have achieved the current intermediate target pose. When entered, we signify to our navigation node that we need to update our target pose to the next location in our intermediate target array. Upon reaching the final goal pose, ADVANCE returns a SUCCESS flag to PongMaster, signifying goal completion. If we are not at our goal pose, we instead transition to the TURN or DRIVE_PID state, depending on which drive routine is selected.</p>
                                <h2>Design Tradeoffs</h2>
                                <p>Though very complex in implementation, we found that a state machine provided us with the flexibility necessary to test a number of different drive, navigation, and sound simulation controllers. We initially set out to have a greater number of pre-defined states for our robot to operate on. However, due to design complexity, many of these individual states were flattened into more complex states that handled a number of actions. Examples of this include the PLAN and ADVANCE states, which handle a number of different operations to provide us with the appropriate path to follow.</p>
                                <p>You may also notice that we neglected to include an error state within the above diagrams. Though there does exist a WAIT state in our code which actsa as an error state, we failed to implement routines to correct such errors and continue towards our goal pose.</p>
                                <h2>FSM Analysis</h2>
                                <p>When constructing this FSM, our group found much difficulty coordinating actions between different nodes that PongMaster. However, overcoming these integration issues yielded an efficient routine of actions that our robot could follow to reach a goal pose. By centralizing our FSM within a single node and serparating all other functionality to individual nodes, we were able to "hot-swap" node builds as they were developed in parallel. </p>
                                <p>Overall, we are extremely satisfied with the state of our PongMaster node. We believe that this FSM was the best, most efficient method of achieving our goals, while maintaining the ability to develop robot features individually. Future implementations of PongMaster would include a greater number of specialized states to increase code complexity and allow for further interchangeability. Lastly, we likely would leverage a developed ROS Finite State Machine package to simplify our implementation with existing frameworks.</p>

                            </article>

						<!-- <div class="row features">
							<section class="col-4 col-12-narrower feature">
								<div class="image-wrapper first">
									<a href="#" class="image featured"><img src="images/pic03.jpg" alt="" /></a>
								</div>
								<header>
									<h3>Dolor sit consequat magna</h3>
								</header>
								<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur
								vel sem sit dolor neque semper magna lorem ipsum.</p>
								<ul class="actions">
									<li><a href="#" class="button">Elevate my awareness</a></li>
								</ul>
							</section>
							<section class="col-4 col-12-narrower feature">
								<div class="image-wrapper">
									<a href="#" class="image featured"><img src="images/pic04.jpg" alt="" /></a>
								</div>
								<header>
									<h3>Dolor sit consequat magna</h3>
								</header>
								<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur
								vel sem sit dolor neque semper magna lorem ipsum.</p>
								<ul class="actions">
									<li><a href="#" class="button">Elevate my awareness</a></li>
								</ul>
							</section>
							<section class="col-4 col-12-narrower feature">
								<div class="image-wrapper">
									<a href="#" class="image featured"><img src="images/pic05.jpg" alt="" /></a>
								</div>
								<header>
									<h3>Dolor sit consequat magna</h3>
								</header>
								<p>Lorem ipsum dolor sit amet consectetur et sed adipiscing elit. Curabitur
								vel sem sit dolor neque semper magna lorem ipsum.</p>
								<ul class="actions">
									<li><a href="#" class="button">Elevate my awareness</a></li>
								</ul>
							</section>
                        </div> -->
					</div>
				</div>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
